version: '2'
services:
  indexing_scripts:
    container_name: apacs_stats_indexing_scripts
    build:
        context: ./
        dockerfile: ./infrastructure/indexing/Dockerfile
    links:
      - "solr"
  solr:
    container_name: apacs_stats_solr
    build:
      context: ./infrastructure/solr/
    ports:
      - "80:8983"
    entrypoint:
      - docker-entrypoint.sh
      - solr-precreate
      - apacs_core
      - /opt/solr/server/solr/configsets/solr_conf/apacs_core
